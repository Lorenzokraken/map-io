/* ChatMessage.css */

.chat-message-container {
  display: flex;
  gap: 0.75rem; /* gap-3 */
  margin-bottom: 1rem; /* mb-4 */
  transition: all 0.2s ease-in-out; /* transition-smooth */
}

.chat-message-container.user {
  flex-direction: row-reverse; /* flex-row-reverse */
}

.chat-message-container.ai {
  flex-direction: row; /* flex-row */
}

.chat-message-avatar {
  height: 2rem; /* h-8 */
  width: 2rem; /* w-8 */
  box-shadow: var(--shadow-soft); /* shadow-soft */
  transition: all 0.2s ease-in-out; /* transition-smooth */
}

.chat-message-avatar.user {
  background-color: var(--chat-user-bg); /* bg-chat-user-bg */
}

.chat-message-avatar.ai {
  background-color: var(--muted); /* bg-muted */
}

.chat-message-avatar-fallback {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  width: 100%;
}

.chat-message-avatar-fallback.user {
  background-color: var(--chat-user-bg); /* bg-chat-user-bg */
  color: var(--chat-user-fg); /* text-chat-user-fg */
}

.chat-message-avatar-fallback.ai {
  background-color: var(--muted); /* bg-muted */
  color: var(--muted-foreground); /* text-muted-foreground */
}

.chat-message-avatar-icon {
  height: 1rem; /* h-4 */
  width: 1rem; /* w-4 */
}

.chat-message-bubble {
  max-width: 85%; /* max-w-[85%] */
  border-radius: 0.75rem; /* rounded-xl */
  padding: 0.75rem 1rem; /* px-4 py-3 */
  box-shadow: var(--shadow-soft); /* shadow-soft */
  transition: all 0.2s ease-in-out; /* transition-smooth */
}

.chat-message-bubble.user {
  background-color: var(--chat-user-bg); /* bg-chat-user-bg */
  color: var(--chat-user-fg); /* text-chat-user-fg */
  border-top-right-radius: 0.125rem; /* rounded-tr-sm */
}

.chat-message-bubble.ai {
  background-color: var(--chat-ai-bg); /* bg-chat-ai-bg */
  color: var(--chat-ai-fg); /* text-chat-ai-fg */
  border-top-left-radius: 0.125rem; /* rounded-tl-sm */
}

/* ReactMarkdown specific styles */
.markdown-paragraph {
  margin-bottom: 0.5rem; /* mb-2 */
}

.markdown-paragraph:last-child {
  margin-bottom: 0; /* last:mb-0 */
}

.markdown-list-ul,
.markdown-list-ol {
  list-style-position: inside; /* To make list-disc/decimal work correctly with ml-4 */
  margin-left: 1rem; /* ml-4 */
  margin-bottom: 0.5rem; /* mb-2 */
}

.markdown-list-ul {
  list-style-type: disc; /* list-disc */
}

.markdown-list-ol {
  list-style-type: decimal; /* list-decimal */
}

.markdown-list-item {
  margin-bottom: 0.25rem; /* mb-1 */
}

.markdown-inline-code {
  background-color: rgba(0, 0, 0, 0.1); /* bg-black/10 */
  padding: 0.125rem 0.375rem; /* px-1.5 py-0.5 */
  border-radius: 0.25rem; /* rounded */
  font-size: 0.75rem; /* text-xs */
  font-family: monospace; /* font-mono */
}

.markdown-pre-block {
  background-color: rgba(0, 0, 0, 0.05); /* bg-black/5 */
  padding: 0.75rem; /* p-3 */
  border-radius: 0.5rem; /* rounded-lg */
  overflow-x: auto; /* overflow-x-auto */
  margin-bottom: 0.5rem; /* mb-2 */
  font-size: 0.75rem; /* text-xs */
}

/* Dark mode for markdown code blocks */
@media (prefers-color-scheme: dark) {
  .markdown-inline-code {
    background-color: rgba(255, 255, 255, 0.1); /* dark:bg-white/10 */
  }

  .markdown-pre-block {
    background-color: rgba(255, 255, 255, 0.05); /* dark:bg-white/5 */
  }
}

.chat-message-timestamp {
  font-size: 0.75rem; /* text-xs */
  margin-top: 0.5rem; /* mt-2 */
  opacity: 0.6; /* opacity-60 */
}

.chat-message-timestamp.user {
  text-align: right; /* text-right */
}

.chat-message-timestamp.ai {
  text-align: left; /* text-left */
}



.chat-message-bubble {
  max-width: 85%;
  border-radius: 1.25rem;
  padding: 0.9rem 1.1rem;
  backdrop-filter: blur(8px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  transition: background-color 0.25s ease, transform 0.15s ease;
}

.chat-message-bubble.user {
  background-color: rgba(59, 130, 246, 0.15); /* blu traslucido */
  color: var(--chat-user-fg);
  border-top-right-radius: 0.3rem;
}

.chat-message-bubble.ai {
  background-color: rgba(255, 255, 255, 0.08); /* grigio traslucido */
  color: var(--chat-ai-fg);
  border-top-left-radius: 0.3rem;
}

@media (prefers-color-scheme: dark) {
  .chat-message-bubble.user {
    background-color: rgba(59, 130, 246, 0.25);
  }
  .chat-message-bubble.ai {
    background-color: rgba(255, 255, 255, 0.06);
    color: rgba(255,255,255,0.9);
  }
}

.chat-message-bubble:hover {
  transform: translateY(-1px);
}

.chat-message-avatar {
  height: 2.5rem;
  width: 2.5rem;
  border-radius: 50%;
  overflow: hidden;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}